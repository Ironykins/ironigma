<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Ironigma - Enigma Machine Emulator</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/w3.css">
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/model.js"></script>
        <script src="js/parts.js"></script>
        <script src="js/main.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Application content here -->
        <div ng-app="ironigma">
            <div ng-controller="enigma">
                <div class="w3-container w3-dark-grey">
                    <h1>Ironigma - Enigma Machine Emulator</h1>
                </div>
                    <div class="w3-row">
                        <a class="w3-btn w3-dark-grey w3-third w3-center" ng-click="opentab='machine'">Operation</a>
                        <a class="w3-btn w3-dark-grey w3-third w3-center" ng-click="opentab='config'">Configuration</a>
                        <a class="w3-btn w3-dark-grey w3-third w3-center" ng-click="opentab='about'">About</a>
                    </div>
                
                <!-- ENIGMA MACHINE FRONT END -->
                <div class="w3-container" ng-show="opentab=='machine'">
                    <div class="w3-row w3-margin-8">
                        <div class="w3-col m2 l2 w3-border">
                            <div class="w3-container w3-dark-grey"><h3>Input Type</h3></div>
                            <ul class="w3-ul">
                                <li><label><input type="radio" ng-model="inputType" value="string">Text Mode</label></li>
                                <li><label><input type="radio" ng-model="inputType" value="char">Typing Mode</label></li>
                                <li><label><input type="checkbox" ng-model="rotorResetOnEncrypt"/>Reset Rotors</label></li>
                            </ul>
                        </div>
                        <div class="w3-col m4 l4 w3-border">
                            <div class="w3-center">
                                <div class="w3-container w3-dark-grey"><h3>Input</h3></div>
                                <div ng-show="inputType=='string'" style="padding:8px">
                                    <textarea class="enigmaInput" rows="8" ng-model="strinput"></textarea><br/>
                                    <button ng-click="clearIO()">Clear</button>
                                    <button ng-click="encryptString()">Encrypt</button>
                                </div>
                                <div ng-show="inputType=='char'" style="padding:8px">
                                    <p>Type your text below:</p>
                                    <input type="text" ng-model="charinput" ng-change="encryptChar()" ng-keydown="backspaceChar($event)"/>
                                </div>
                            </div>
                        </div>
                        <div class="w3-col m3 l3 w3-border">
                            <div class="w3-center">
                                <div class="w3-container w3-dark-grey"><h3>Recognized Text</h3></div>
                                <div style="padding:8px">
                                    <textarea enigma-output-formatter rows="8" readonly="true" ng-model="plaintext"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="w3-col m3 l3 w3-border">
                            <div class="w3-center">
                                <div class="w3-container w3-dark-grey"><h3>Output</h3></div>
                                <div style="padding:8px">
                                    <textarea enigma-output-formatter rows="8" class="enigmaOutput" readonly="true" ng-model="ciphertext"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="w3-card-4 w3-margin-8">
                        <div class="w3-container w3-dark-grey">
                            <h3 style="float:left">Rotors</h3>
                            <a class="w3-btn w3-black w3-text-white" ng-click="reset()" href="#" style="margin:10px;float:right;">Reset</a>
                            <a class="w3-btn w3-black w3-text-white" ng-click="step()" href="#" style="margin:10px 0;float:right;">Step</a>
                        </div>
                        <div class="w3-card-4 w3-margin-8" style="float:left;width:100px" ng-repeat="n in enigma.rotors track by $index">
                            <div class="w3-center w3-padding-4 w3-dark-grey"><b>Rotor {{n.name}}</b></div>
                            <table>
                                <tr><td><button ng-click="stepRotor(n,true)">^</button></td></tr>
                                <tr><td><input class="rotorInput" onClick="this.focus();this.select();" rotor-pos-formatter type="text" ng-model="n.position" maxlength="1"/></td></tr>
                                <tr><td><button ng-click="stepRotor(n,false)">v</button></td></tr>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ENIGMA MACHINE CONFIGURATION -->
                <div class="w3-container" id="machineConfig" ng-show="opentab=='config'">
                    <div class="w3-row">
                        <div class="w3-card-4 w3-margin-8 w3-col l3">
                            <div class="w3-container w3-dark-grey"><h3>Ring Settings</h3></div>
                            <div class="w3-card-4 w3-margin-8" style="float:left;width:100px" ng-repeat="n in enigma.rotors track by $index">
                                <div class="w3-center w3-padding-4 w3-dark-grey"><b>Rotor {{n.name}}</b></div>
                                    <table>
                                        <tr><td><button ng-click="stepRingsetting(n,true)">^</button></td></tr>
                                        <tr><td><input class="rotorInput" rotor-ringsetting-formatter onClick="this.focus();this.select();" type="text" ng-model="n.ringsetting" maxlength="1"/></td></tr>
                                        <tr><td><button ng-click="stepRingsetting(n,false)">v</button></td></tr>
                                    </table>
                            </div>
                        </div>
                        <div class="w3-card-4 w3-margin-8 w3-col l1">
                            <div class="w3-container w3-dark-grey"><h3>Reflector</h3></div>
                            <div class="w3-center w3-padding-8">
                                <select data-ng-options="o.name for o in reflectorList" data-ng-model="enigma.reflector">
                                </select>
                            </div>
                        </div>
                        <div class="w3-card-4 w3-margin-8 w3-col l5">
                            <div class="w3-container w3-dark-grey"><h3>Plugboard</h3></div>
                            <div class="w3-card-4 w3-margin-4" style="float:left;width:40px;" ng-repeat="n in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' track by $index">
                                <table class="w3-table w3-striped"><tr><td><b>{{n}}</b></td></tr>
                                    <tr><td>
                                        <input class="plugInput" type="text" ng-model="plugboard[n]" ng-change="plugboardInput(n)" maxlength="1"/>
                                    </td></tr>
                                </table>
                            </div>
                        </div>
                        <div class="w3-card-4 w3-margin-8 w3-col l5">
                            <div class="w3-container w3-dark-grey">
                                <div style="float:left;"><h3>Rotors</h3></div>
                                <a class="w3-btn w3-black w3-text-white" href="#" ng-click="addRotor()" style="margin:10px 0;float:right;"> Add New</a>
                            </div>
                            <div class="w3-card-4 w3-margin-4" style="float:left;width:100px;" ng-repeat="n in enigma.rotors track by $index">
                                <div class="w3-center w3-padding-4 w3-dark-grey"><b>Rotor {{n.name}}</b></div>
                                <table>
                                    <tr><td><select data-ng-options="o.name for o in rotorList" data-ng-model="selectedRotors[$index]" ng-change="changeRotor($index)"></select></tr></td>
                                    <tr><td><button ng-click="removeRotor($index)">Delete</button></tr></td>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="w3-container" ng-show="opentab=='about'">
                    <p> This is an enigma machine emulator! It currently emulates a standard M3 machine, but can be easily configured using the controls below to emulate any arbitrary enigma, provided that standard rotors and reflectors are used.  </p>
                    <p>Follow me on Github! <a href="http://github.com/ironykins">Click here!</a></p>
                </div>
            </div>
        </div>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <!--<script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script> -->
    </body>
</html>
